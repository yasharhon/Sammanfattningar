\section{Classical mechanics}
In classical mechanics, configuration space is the space of all possible configurations of a system. We can impose coordinates $\chi^{a}$ on this space in order to use what we know.

\paragraph{Kinetic energy}
Kinetic energy is defined by a rank $2$ tensor as
\begin{align*}
	E_{\text{k}} = \frac{1}{2}T_{ab}\dot{\chi}^{a}\dot{\chi}^{b},
\end{align*}
where the dot now really represents the time derivative.

%Can be used to show H = T + V

\paragraph{Hamilton's principle}
We define the Lagrangian of a system as $\lag = E_{\text{k}} - V$, where $V$ is the potential energy and taken to be a function on coordinate space. The action of a system over time is defined as
\begin{align*}
	S = \integ{}{}{t}{\lag}.
\end{align*}
Hamilton's principle states that for the motion of the system in configuration space, $\var{S} = 0$. This can be expressed as
\begin{align*}
	\var{S} = \integ{}{}{t}{\var{\lag}} = \integ{}{}{t}{\left(\del{\chi^{a}}{\lag} - \dv{t}\del{\dot{\chi}^{a}}{\lag}\right)\var{\chi^{a}}} = 0.
\end{align*}

\paragraph{The kinetic metric}
Consider a system with no potential energy. The Lagrangian simply becomes $\lag = \frac{1}{2}T_{ab}\dot{\chi}^{a}\dot{\chi}^{b}$. This is very similar to the integral of curve length (or, rather its square, the extremum of which was noted to be the same), except $g_{ab}$ has been replaced by $T_{ab}$. This inspires us to define $T_{ab}$ as the kinetic metric, with corresponding Christoffel symbols.

\paragraph{Motion of a classical system}
By defining $a^{b} = \dot{\chi}^{a}\dcov{a}{\dot{\chi}^{b}}$, the previous work leads us to a system with no potential satisfying $a^{b} = \ddot{\chi}^{b} + \chris{b}{a}{c}\dot{\chi}^{a}\dot{\chi}^{c} = 0$. In other words, a system with no potential moves along the geodesics of the kinetic metric.

For a system with a potential, only the $\del{\chi^{a}}{\lag}$ term is affected, and
\begin{align*}
	a^{b} = - T^{ba}\del{a}{V} = T^{ba}F,
\end{align*}
which is a generalization of Newton's second law.

\paragraph{Noether's theorem}
Noether's theorem relates symmetries of physical systems to conservation laws.

What is a symmetry, then? Consider a one-parameter transformation $t\to\tau(t, s),\ q^{a}\to Q^{a}(q, s)$, where $s$ is the parameter with respect to which the system is transformed, such that $\tau(t, 0) = t,\ Q^{a}(q, s) = q^{a}$ and for small $s = \varepsilon$ that $t\to t + \varepsilon\var{t},\ q^{a}\to q^{a} + \varepsilon\var{q^{a}}$. This is assumed to be normalized such that $\var{t}$ is either $0$ or $1$. How? Don't ask. A quasi-symmetry of a system with Lagrangian $\lag$ is a transformation such that
\begin{align*}
	\varepsilon\var{\lag} = \lag(Q, \dot{Q}, \tau) - \lag(q, \dot{q}, t) = \varepsilon\dv{F}{t}
\end{align*}
for some $F$. The variation of the Lagrangian can be written as
\begin{align*}
	\var{\lag} = \del{q^{a}}{\lag}\var{q^{a}} + \del{\dot{q}^{a}}{\lag}\var{\dot{q}^{a}} + \del{t}{\lag}\var{t}.
\end{align*}
The total time derivative of the Lagrangian is given by
\begin{align*}
	\dv{\lag}{t} = \del{t}{\lag} + \del{q^{a}}{\lag}\dot{q}^{a} + \del{\dot{q}^{a}}{\lag}\ddot{q}^{a},
\end{align*}
which yields
\begin{align*}
	\var{\lag} = \del{q^{a}}{\lag}(\var{q^{a}} - \dot{q}^{a}\var{t}) + \del{\dot{q}^{a}}{\lag}(\var{\dot{q}^{a}} - \ddot{q}^{a}\var{t}) + \dv{\lag}{t}\var{t}.
\end{align*}
The equations of motion are $\del{q^{a}}{\lag} = \dv{t}\del{\dot{q}^{a}}{\lag}$. For a set of coordinates that satisfy this - a so-called on-shell solution - we have
\begin{align*}
	\var{\lag} &= \dv{t}\del{\dot{q}^{a}}{\lag}(\var{q^{a}} - \dot{q}^{a}\var{t}) + \del{\dot{q}^{a}}{\lag}(\var{\dot{q}^{a}} - \ddot{q}^{a}\var{t}) + \dv{\lag}{t}\var{t} \\
	           &= \dv{t}\left(\del{\dot{q}^{a}}{\lag}(\var{q^{a}} - \dot{q}^{a}\var{t}) + \lag\var{t}\right).
\end{align*}
If the transformation is a quasi-symmetry of the system, then this is equal to a total time derivative of $F$, and the quantity
\begin{align*}
	J = F - \del{\dot{q}^{a}}{\lag}\var{q^{a}} + (\dot{q}^{a}\del{\dot{q}^{a}}{\lag} - \lag)\var{t}
\end{align*}
thus satisfies $\dv{J}{t} = 0$. We can introduce the general momenta $p_{a} = \del{\dot{q}^{a}}{\lag}$ and the Hamiltonian $\ham = p_{a}\dot{q}^{a} - \lag$ to write
\begin{align*}
	J = F - p_{a}\var{q^{a}} + \ham\var{t}.
\end{align*}

We arrive at the conclusion that $J$ is a conserved quantity under a quasi-symmetry of the system. Identifying the conservation laws of a system is thus a matter of identifying the quasi-symmetries of a system and computing $J$ under that transformation.

\example{A free particle in space}
Consider a free particle in space. Its Lagrangian is given by $\lag = \frac{1}{2}m\dot{\vb{x}}^{2}$, and the variation of this is
\begin{align*}
	\var{\lag} = m\dot{\vb{x}}\cdot\var{\dot{\vb{x}}}.
\end{align*}
Its general momentum is
\begin{align*}
	\vb{p} = \del{\dot{\vb{x}}}{\lag} = m\dot{\vb{x}}.
\end{align*}
The Hamiltonian is
\begin{align*}
	\ham = \vb{p}\cdot\dot{\vb{x}} - \lag = \frac{1}{2}m\dot{\vb{x}}^{2}.
\end{align*}
We now want to identify quasi-symmetries of the system that make the variation of the Lagrangian either zero or the time derivative of some quantity. A key idea here is that we are only allowed to change the variations (or so I think).

A first attempt is keeping $\var{\vb{x}}$ constant and not varying thiime(a spatial translation), which implies $\var{\dot{\vb{x}}} = \vb{0}$ and $\var{\lag} = 0$. This implies that $F$ is constant. The conserved quantity is thus
\begin{align*}
	J = F - \vb{p}\cdot\var{\vb{x}} = F - \vb{p}\cdot\vb{c},
\end{align*}
i.e. the momentum of the system is conserved. We also note that the constant $F$ in this case is arbitrary, and we might as well have set it to $0$. This will be the case at least sometimes.

A second attempt is varying time, i.e. $\var{t} = 1$, but keeping the coordinates fixed, i.e. $\var{\vb{x}} = 0$ (a time translation). This yields $\var{\dot{\vb{x}}} = \vb{0}$ and $\var{\lag} = 0$. Once again $F$ is constant and taken to be zero, and the conserved quantity is thus $J = H$, i.e. the Hamiltonian of the system is conserved.

A third attempt is to somehow make the scalar product in the variation of the Lagrangian zero, without varying time. An option is $\var{\vb{x}} = \vb{\omega}\times\vb{x}$, where $\vb{\omega}$ is a constant vector. This yields $\var{\dot{\vb{x}}} = \vb{\omega}\times\dot{\vb{x}}$ and $\var{\lag} = 0$. The conserved quantity is thus
\begin{align*}
	J &= -\vb{p}\cdot(\vb{\omega}\times\vb{x}) \\
	  &= -\vb{\omega}\cdot(\vb{x}\times\vb{p}).
\end{align*}
Since $\vb{\omega}$ is constant, that means that $\vb{x}\times\vb{p}$, i.e. the angular momentum, is conserved.

\paragraph{Hamiltonian mechanics}
Hamiltonian mechanics starts with trying to transform $\lag(q, \dot{q}, t)$ to $\ham(q, p, t)$. To start with this, we reintroduce the general momenta $p_{i} = \del{\dot{q}_{i}}{\lag}$ and define the Hamiltonian
\begin{align*}
	\ham = p_{i}\dot{q}_{i} - \lag.
\end{align*}
This is a Legendre transform of the Hamiltonian, which is discussed below. In Lagrangian mechanics, we considered paths in configuration space. In Hamiltonian mechanics, we instead consider paths in phase space, i.e. a space where the points are $(q, t)$. In this space, paths do not intersect as the system is deterministic. The new equations of motion in this formalism is
\begin{align*}
	\dot{p}_{i} = -\del{q_{i}}{\ham},\ \dot{q}_{i} = \del{p_{i}}{\ham}.
\end{align*}

Paths in phase space are periodic for integrable systems and fill out the accessible parts of phase space for chaotic systems.

\paragraph{Legendre transforms}
To illustrate the Legendre transform, consider a function $f(x, y)$ and $g(x, y, u) = ux - f(x, y)$. Its total derivative is given by
\begin{align*}
	\dd{g} = u\dd{x} + x\dd{u} - \del{x}{f}\dd{x} - \del{y}{f}\dd{y}.
\end{align*}
By choosing $u = \del{x}{f}$, we obtain
\begin{align*}
	\dd{g} = x\dd{u} - \del{y}{f}\dd{y},
\end{align*}
implying that $g$ is only a function of $u$ and $y$. To obtain $g$, invert the definition of $u$ to obtain $x(u, y)$.

\paragraph{Equations of motion}
The variation of the Hamiltonian is given by
\begin{align*}
	\dd{\ham} &= \dot{q}_{i}\dd{p_{i}} + p_{i}\dd{\dot{q}_{i}} - \del{q_{i}}{\lag}\dd{q_{i}} - \del{\dot{q}_{i}}{\lag}\dd{\dot{q}_{i}} - \del{t}{\lag}\dd{t} \\
	          &= \dot{q}_{i}\dd{p_{i}} - \del{q_{i}}{\lag}\dd{q_{i}} - \del{t}{\lag}\dd{t}.
\end{align*}
Combining this with the equations of motion
\begin{align*}
	\del{q_{i}}{\lag} = \dv{t}\left(\del{\dot{q}_{i}}{\lag}\right) = \dv{t}\left(p_{i}\right) = \dot{p}_{i}
\end{align*}
yields
\begin{align*}
	\dot{q}_{i} = \del{p_{i}}{\ham},\ \dot{p}_{i} = -\del{q_{i}}{\ham},\ \del{t}{\lag} = -\del{t}{\ham}.
\end{align*}

We also have
\begin{align*}
	\dv{\ham}{t} &= \del{q_{i}}{\ham}\dot{q}_{i} + \del{p_{i}}{\ham}\dot{p}_{i} + del{t}{\ham} \\
	             &= \del{t}{\ham},
\end{align*}
and so the Hamiltonian is conserved if it has no explicit time dependance.

\paragraph{Liouville's theorem}
As paths in phase space do not cross, we can think of the time evolution of a system as a flow in phase space. The volume element is $\dd{V} = \dd{q}\dd{p}$. Liouville's theorem states that flow in phase space is incompressible.

To show this, consider the state at some point in time and after some infinitesimal time $\dd{t}$. Denote the point in phase space at the start as $(q, p)$ and after $\dd{t}$ as $(q', p').$ To first order in time we have
\begin{align*}
	q_{i}' = q_{i} + \dot{q}_{i}\dd{t} = q_{i} + \del{p_{i}}{\ham}\dd{t},\ p_{i}' = p_{i} + \dot{p}_{i}\dd{t} = p_{i} - \del{q_{i}}{\ham}\dd{t}.
\end{align*}
The volume element is given by
\begin{align*}
	\dd{V}' &= \left(\dd{q} +  \left(\del{q}{\del{p}{\ham}}\dd{q} + \del[2]{p}{\ham}\dd{p}\right)\dd{t}\right)\left(\dd{p} -  \left(\del[2]{q}{\ham}\dd{q} + \del{p}{\del{q}{\ham}}\dd{p}\right)\dd{t}\right) \\
	        &= \dd{q}\dd{p} + \left(-\dd{q}\left(\del[2]{q}{\ham}\dd{q} + \del{p}{\del{q}{\ham}}\dd{p}\right) + \dd{p\left(\del{q}{\del{p}{\ham}}\dd{q} + \del[2]{p}{\ham}\dd{p}\right)}\right)\dd{t} \\
	        &= \dd{q}\dd{p} + \left(-\del[2]{q}{\ham}(\dd{q})^{2} + (\del{q}{\del{p}{\ham}} - \del{p}{\del{q}{\ham}})\dd{q}\dd{p} + \del[2]{p}{\ham}(\dd{p})^{2}\right)\dd{t}.
\end{align*}
The equations of motion imply that the terms containing two consecutive derivatives with respect to the same variable are equal to zero. Assuming the Hamiltonian to be sufficiently smooth, the cross-derivatives are equal. This implies
\begin{align*}
	\dd{V}' = \dd{V}.
\end{align*}

\paragraph{Poisson brackets}
Consider a function $f(q, p, t)$. Its time derivative is given by
\begin{align*}
	\dv{f}{t} &= \del{q_{i}}{f}\dot{q}_{i} + \del{p_{i}}{f}\dot{p}_{i} + \del{t}{f} \\
	          &= \del{q_{i}}{f}\del{p_{i}}{\ham} - \del{p_{i}}{f}\del{q_{i}}{\ham} + \del{t}{f} \\
	          &= \pob{f}{\ham} + \del{t}{f},
\end{align*}
where we now have defined the Poisson bracket. It is bilinear and satisfies
\begin{align*}
	\pob{f}{g}          &= -\pob{g}{f}, \\
	\pob{fg}{h}         &= f\pob{g}{h} + \pob{f}{h}g, \\
	\pob{f}{\pob{g}{h}} &+ \pob{g}{\pob{h}{f}} + \pob{h}{\pob{f}{g}} = 0.
\end{align*}
The expression above implies that if $\pob{f}{\ham} = 0$ and $f$ does not depend explicitly on time, then it is a constant of motion.

\paragraph{Restatement of Liouville's theorem}
We define $\rho(q, p, t)$ as the probability that a particle is close to $(q, p)$. Alternatively, for a large number of particles, we can define it as the number of particles close to $(q, p)$.

We have
\begin{align*}
	\dv{\rho}{t} = 0,
\end{align*}
implying
\begin{align*}
	\del{t}{\rho} = -\pob{\rho}{\ham}.
\end{align*}
This is an equivalent statement of Liouville's theorem.

\paragraph{Canonical transformation}
A canonical transformation is a transformation $(\vb{q}, \vb{p})\to (\vb{Q}, \vb{P})$ such that the Hamiltonian $H$ expressed in these new coordinates also satisfies Hamilton's equations in the new coordinates, i.e.
\begin{align*}
	\dot{Q}_{i} = \del{P_{i}}{H},\ \dot{P}_{i} = -\del{Q_{i}}{\ham}.
\end{align*}

\paragraph{Canonical transformations and Poisson brackets}
It turns out that a transformation in phase space is canonical if and only if they preserve the following equations:
\begin{align*}
	\pob{q_{i}}{q_{j}} = \pob{p_{i}}{p_{j}} = 0,\ \pob{q_{i}}{p_{j}} = \delta_{ij}.
\end{align*}

To show this, consider some point $x$ in phase space. Under the canonical transformation, it transforms to $y$. Suppose now that the relation
\begin{align*}
	\dot{x}_{i} = J_{ij}\del{x_{j}}{\ham}
\end{align*}
to be true. According to the equations of motion, this would imply
\begin{align*}
	J_{ij} = 
	\begin{cases}
		 1, &j = i + n, i = 1, 2, \dots, n, \\
		-1, &j = i - n, i = n + 1, \dots, 2n.
	\end{cases}
\end{align*}
If the transformation is canonical, then the same should be true after the transformation. On the other hand, the chain rule yields
\begin{align*}
	\dot{y}_{i} = \del{x_{j}}{y_{i}}J_{ik}\del{x_{k}}{y_{m}}\del{y_{m}}{H}.
\end{align*}
Comparing this with the Jacobian $\mathcal{J}$ yields
\begin{align*}
	J = \mathcal{J}J\mathcal{J}^{T}.
\end{align*}

\paragraph{Infinitesimal transformations}
Consider a transformation of the form
\begin{align*}
	q_{i} \to q_{i} + \alpha F_{i},\ p_{i} \to p_{i} + \alpha E_{i}.
\end{align*}
Computing the Poisson brackets of the new coordinates and momenta, and requiring it to be zero, yields
%Show this with Jacobian instead?
\begin{align*}
	\pob{Q_{i}}{P_{j}} &= \pob{q_{i}}{p_{j}} + \pob{q_{i}}{\alpha E_{j}} + \pob{\alpha F_{i}}{p_{j}} + \pob{\alpha F_{i}}{\alpha E_{j}} \\
	                   &= \dots \\
	                   &= \delta_{ij} + \alpha(\del{p_{i}}{E_{j}} + \del{q_{j}}{F_{i}}) + \dots
\end{align*}
and the requirement
\begin{align*}
	\del{p_{i}}{E_{j}} = -\del{q_{j}}{F_{i}}.
\end{align*}
A simple choice of solution is
\begin{align*}
	E_{j} = -\del{q_{j}}{G},\ F_{i} = \del{p_{i}}{G}
\end{align*}
for some (smooth) function $G$. We say that $G$ generates the transformation.

We now reinsert this into the coordinate transformations. By considering the transformation as a map onto the same phase space, we obtain
\begin{align*}
	\del{\alpha}{q_{i}} = \del{p_{i}}{G},\ \del{\alpha}{p_{i}} = -\del{q_{i}}{G}.
\end{align*}
We notice the strong analogy with Hamilton's equations. This kind of transformations can be thought of as flows in phase space. 

\paragraph{Symmetries and infinitesimal transformations}
Suppose now that we perform an infinitesimal transformation generated by $G$. We then obtain
%TODO: SHOW
\begin{align*}
	\dv{\ham}{\alpha} = \pob{\ham}{G}.
\end{align*}
%TODO: SHOW
We have seen that a symmetry of the Hamiltonian is a transformation such that $\var{\ham} = 0$. Supposing this to be true, we have $\dot{G} = \pob{\ham}{G} = 0$, and $G$ is conserved. In other words, if $G$ generates a symmetry, then it is conserved.

\paragraph{Symmetries and canonical transformations}
We return to the principle of least action. Symmetries of the Lagrangian were on the form $\lag\to\lag + \dv{F}{t}$. We can now see the correspondence between $F$ and the generators $G$ of symmetries, and choose to ignore any differences. The principle of least action can be stated as a variational problem on phase space instead, where we seek the extrema of
\begin{align*}
	S = \integ{}{}{t}{p_{i}\dot{q}_{i} - \ham}.
\end{align*}
Recalling that the equations of motion must be preserved under canonical transformations, the action under a canonical transformation can be written as
\begin{align*}
	\integ{}{}{t}{P_{i}\dot{Q}_{i} - H},
\end{align*}
and this is still extremal under the transformation. This is certainly true if
\begin{align*}
	p_{i}\dot{q}_{i} - \ham = P_{i}\dot{Q}_{i} - H + \dv{F}{t}.
\end{align*}

There are various functions that can satisfy this. For instance, consider a function $F(q, Q, t)$. We obtain that 
%What do we obtain?

Another choice is a function $F = F_{2}(q, P, t) - P_{i}Q_{i}$. We have
\begin{align*}
	\dv{F}{t} = \del{q_{i}}{F_{2}}\dot{q}_{i} + \del{P_{i}}{F_{2}}\dot{P}_{i} - \dot{P}_{i}Q_{i} - P_{i}\dot{Q}_{i} + \del{t}{F_{2}}.
\end{align*}
Inserting this into the above criterion yields
\begin{align*}
	p_{i} = \del{q_{i}}{F_{2}},\ Q_{i} = \del{p_{i}}{F_{2}},\ H = \ham + \del{t}{F_{2}}.
\end{align*}

\paragraph{Hamilton-Jacobi theory}
Suppose that we could perform a transformation on the form $F = F_{2}(q, P, t) - P_{i}Q_{i}$ such that $H = 0$. This would imply that all $Q_{i}$ and $P_{i}$ were to be constant. The equation
\begin{align*}
	\ham + \del{t}{F_{2}} = 0
\end{align*}
would thus define a differential equation in $F_{2}$. We can now, with some reasoning behind it, I guess, call $F_{2}$ the action $S$. This yields the Hamilton-Jacobi equation
\begin{align*}
	H + \del{t}{S} = 0,
\end{align*}
where the Hamiltonian, according to previous arguments, would depend on the time derivative of $S$.

%Prove S action

\paragraph{The Schr√∂dinger equation from Hamilton-Jacobi theory}

\paragraph{Quantum mechanics and the action}

\paragraph{Integrable systems}
Consider a system with some Hamiltonian. This system is integrable if there is a canonical transformation $(q, p)\to (\theta, I)$ suc that the transformed Hamiltonian only depends on the momenta. For such a system, the equations of motion become
\begin{align*}
	\dot{\theta}_{i} = \del{I_{i}}{H} = \omega_{i},\ \dot{I}_{i} = 0.
\end{align*}

\paragraph{Structures of theory}
A theory in physics contain
\begin{itemize}
	\item some notion of states.
	\item observables.
	\item a description of the dynamics of the system.
	\item predictions of experiments.
\end{itemize}

\example{Hamiltonian mechanics}